function HexFlow(){var e=this;e.enabled=!1,e.delay=192,e.s=-1,e.lh=12,e.offset=12,e.n=384,e.p=0,e.dump=document.getElementById("hex"),e.links=e.dump.getElementsByTagName("b"),e.hex=function(){for(var t in e.dump.style.top=(e.p-e.offset)*e.lh+"pt",e.links)e.links[t].style&&(e.links[t].style.top=-(e.p-e.offset)*e.lh+"pt");e.p+=e.s,(e.p<=-e.n||e.p>=0)&&(e.s=-e.s)},e.stop=function(t){"A"!=t.target.nodeName&&(e.enabled=0,window.clearInterval(e.timer))},e.run=function(){e.enabled=1,e.timer=window.setInterval(e.hex,e.delay)},e.toggle=function(t){"A"!=t.target.nodeName&&(e.enabled?e.stop():e.run())}}function UserInterface(){var e=this;e.elements={wrapper:document.getElementById("wrapper"),message:document.getElementById("messageBoxInner"),messageBox:document.getElementById("messageBox"),dump:document.getElementById("dump"),dumpTrigger:document.getElementById("dumpTrigger")},e.show={message:function(t){e.elements.message.innerHTML=t,e.elements.messageBox.classList.remove("hidden"),console.log(t)}},e.close={message:function(){e.elements.messageBox.classList.add("hidden")},dump:function(t){"A"!=t.target.nodeName&&(e.elements.dump.classList.add("hidden"),e.elements.dumpTrigger.classList.add("hidden"))}},e.toggle={dump:function(t){"A"!=t.target.nodeName&&(e.elements.dump.classList.toggle("hidden"),e.elements.dumpTrigger.classList.toggle("hidden"))}}}function Font(){var e=this;e.family="Jura",e.size=30,e.sizeDefault=30,e.sizeVariable=function(){return Math.floor((.7*Math.random()+.5)*e.size)},e.setZoom=function(t){e.size=Math.floor(t*e.sizeDefault)}}function Direction(){var e=this;e.currentX="none",e.currentY="down",e.directionX={left:-1,right:1,none:0},e.directionY={down:1,up:-1,none:0}}function Color(){var e=this;e.default="#1E90FF",e.current="#1E90FF",e.palette={lime:"#00FF00",olive:"#999900",mediumseagreen:"#3CB371",red:"#FF1A1A",deeppink:"#FF1493",fuchsia:"#FF00FF",orange:"#FFA500",yellow:"#FFFF00",blue:"#3333FF",dodgerblue:"#1E90FF",aqua:"#00FFFF",whitesmoke:"#F5F5F5"},e.set=function(t){Object.prototype.hasOwnProperty.call(e.palette,t)&&(e.current=e.palette[t])}}function Music(){var e=this;e.panel=document.getElementById("musicPanel"),e.player=document.getElementById("music"),e.playerSource=document.getElementById("musicSource"),e.index=0,e.tracks=[{author:"David Fesliyan",title:"New Heights",source:"https://www.fesliyanstudios.com/download-link.php?src=i&id=368"},{author:"David Fesliyan",title:"Journey To The Promise",source:"https://www.fesliyanstudios.com/download-link.php?src=i&id=263"},{author:"David Fesliyan",title:"Powerful",source:"https://www.fesliyanstudios.com/download-link.php?src=i&id=539"},{author:"David Fesliyan",title:"Forever",source:"https://www.fesliyanstudios.com/download-link.php?src=i&id=494"},{author:"Steve Oxen",title:"The Last Time",source:"https://www.fesliyanstudios.com/download-link.php?src=i&id=863"},{author:"Steve Oxen",title:"Beyond The Stars",source:"https://www.fesliyanstudios.com/download-link.php?src=i&id=1332"}],e.set=function(t=0){console.log("Playing #"+t+": "+e.tracks[t].author+" | "+e.tracks[t].title),e.panel.innerHTML=e.tracks[t].author+" | "+e.tracks[t].title,e.panel.href=e.tracks[t].source,t!=e.index?(e.index=t,!e.player.paused&&e.player.pause(),e.playerSource.setAttribute("src",e.tracks[t].source),e.player.load(),e.player.play()):e.player.paused&&e.player.play()},e.set()}function Ticker(e,t=0,n=0){var i=this;i.last=!1,i.interval=e,i.intervalDefault=e,i.duration=t,i.delay=n,i.setSpeed=function(e){i.interval=Math.floor(1/e*i.intervalDefault)}}function Message(e,t){var n=this;n.enabled=!0,n.index=0,n.ticker=new Ticker(e,t),n.pool=["<i>e</i>&thinsp;<sup>i&pi;</sup>&thinsp;+1=&thinsp;0<br/>&mdash;Euler's identity","Follow the white rabbit.<br/>&mdash;The Matrix","Itâ€™s probably better to have him inside the tent pissing out, than outside the tent pissing in.<br/>&mdash;Lyndon B. Johnson about J. Edgar Hoover","There is a difference between knowing the path and walking the path.<br/>&mdash;Morpheus, The Matrix","Hello everybody out there...<br/>&mdash;Linus Torvalds","2<sup>&thinsp;&alefsym;<sub>0</sub></sup>&thinsp;&#8799;&thinsp;&alefsym;<sub>1</sub>&thinsp;&#8799;&thinsp;&#8493;<br/>&mdash;Cantor's continuum","I want to belive.<br/>&mdash;Bureau Fox Mulder, X-Files"]}function Matrix(e){var t=this;t.m=[],t.chars="!\"#$%&'()*+,-./:;<=>?[\\]^_{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t.density=1.2,t.canvas=document.getElementById(e),t.context=t.canvas.getContext("2d"),t.canvas.width=window.innerWidth,t.canvas.height=window.innerHeight,t.hex=new HexFlow,t.font=new Font,t.ui=new UserInterface,t.direction=new Direction,t.color=new Color,t.music=new Music,t.ticker=new Ticker(40,0),t.message=new Message(4e4,3e4),t.numCols=Math.floor(t.density*t.canvas.width/t.font.size),t.numRows=Math.floor(t.density*t.canvas.height/t.font.size),t.randomInt=function(e){return Math.floor(Math.random()*e)},t.randomChar=function(){return t.chars[t.randomInt(t.chars.length)]},t.createChar=function(e=0){var n=t.font.sizeVariable(),i=t.randomInt(t.canvas.width),s=-n-e,o=((o=Math.floor(t.randomInt(1.2*t.canvas.height)))>t.canvas.height&&(o=t.canvas.height),o+=n);return{posX:i,posY:s,stopX:0,stopY:o,fontSize:n,prev:{posX:0,posY:0,char:""}}},t.init=function(){t.m=[];for(var e=0;e<t.numCols;e++)t.m.push(t.createChar(2*t.randomInt(t.canvas.height)));window.requestAnimationFrame(t.draw)},t.resize=function(){t.canvas.width=window.innerWidth,t.canvas.height=window.innerHeight,t.numCols=Math.floor(t.density*t.canvas.width/t.font.size),t.numRows=Math.floor(t.density*t.canvas.height/t.font.size),t.init()},t.clearScreen=function(){t.context.clearRect(0,0,t.canvas.width,t.canvas.height)},t.drawCharPrev=function(e){t.context.font=e.fontSize+"px "+t.font.family,t.context.fillStyle=t.color.current,t.context.globalCompositeOperation="hard-light",t.context.fillText(e.prev.char,e.prev.posX,e.prev.posY)},t.drawChar=function(e){var n=t.randomChar();return t.context.globalCompositeOperation="source-atop",t.context.fillStyle="rgba(0, 0, 0, 0.5)",t.context.fillRect(e.posX-Math.floor(.25*e.fontSize),e.posY-Math.floor(.8*e.fontSize),e.fontSize,e.fontSize),t.drawCharPrev(e),t.context.font=e.fontSize+"px "+t.font.family,t.context.globalCompositeOperation="source-over",t.context.fillStyle="white",t.context.fillText(n,e.posX,e.posY),n},t.draw=function(e){if(e>t.ticker.delay){if(!t.ticker.last||e>=t.ticker.last+t.ticker.interval){t.ticker.last=e,t.context.fillStyle="rgba(0, 0, 0, 0.09)",t.context.fillRect(0,0,t.canvas.width,t.canvas.height);for(var n=0;n<t.m.length;n++){var i=!0;t.m[n].posX+=t.direction.directionX[t.direction.currentX]*t.m[n].fontSize+0,t.m[n].posY+=t.direction.directionY[t.direction.currentY]*t.m[n].fontSize+0,t.m[n].posY<t.m[n].stopY&&(t.m[n].posY>=0&&(t.m[n].prev.char=t.drawChar(t.m[n])),i=!1),i?(t.drawCharPrev(t.m[n]),t.m[n]=t.createChar()):(t.m[n].prev.posX=t.m[n].posX,t.m[n].prev.posY=t.m[n].posY)}}t.message.enabled&&((!t.message.ticker.last&&e>t.message.ticker.interval||e>=t.message.ticker.last+t.message.ticker.interval)&&(t.message.ticker.last=e,t.ui.show.message(t.message.pool[t.message.index]),t.message.index++,t.message.index>=t.message.pool.length&&(t.message.index=0)),e>=t.message.ticker.last+t.message.ticker.duration&&t.ui.close.message())}window.requestAnimationFrame(t.draw)},t.ui.elements.dump.addEventListener("click",t.ui.close.dump),t.ui.elements.dump.addEventListener("click",t.hex.stop),t.ui.elements.dumpTrigger.addEventListener("click",t.ui.toggle.dump),t.ui.elements.dumpTrigger.addEventListener("click",t.hex.toggle),t.music.player.addEventListener("ended",(function(){t.music.set(t.music.index<t.music.tracks.length-1?t.music.index+1:0)})),window.addEventListener("resize",(function(){t.resize()})),t.init()}new Matrix("matrix");